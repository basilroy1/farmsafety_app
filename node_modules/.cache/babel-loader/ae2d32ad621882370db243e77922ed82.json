{"ast":null,"code":"var _jsxFileName = \"/home/basil/farmsafety_app/src/components/home/welcome.js\";\nimport React, { Component } from \"react\";\nimport \"./welcome.css\";\nimport { MdPerson, MdCheckBox } from \"react-icons/md\";\nimport { FiLogOut } from \"react-icons/fi\";\nimport { GiSwordsEmblem } from \"react-icons/gi\";\nimport piechart from \"../pictures/piechartMachinery.jpg\";\nimport Loader from \"react-loader-spinner\";\nimport { Button, Nav, Navbar, ButtonToolbar, Tabs, Tab, TabPane } from \"react-bootstrap\"; //import { BrowserRouter, Switch, Route, Link } from \"react-router-dom\";\n//import Login from \"../quiz/login\";\n//import Signup from \"../quiz/signup\";\n\nimport Quiz from \"../quiz/quiz\";\nimport fire from \"../../config/fire\";\nimport UserProfile from \"../quiz/userProfile\";\nimport Test from \"./test\";\nimport Articles from \"./articles\";\n\nclass Welcome extends Component {\n  constructor(props) {\n    super(props);\n\n    this.changeToquiz1 = () => {\n      this.setState({\n        level1: true,\n        level2: false,\n        level3: false,\n        level4: false,\n        level5: false\n      });\n    };\n\n    this.changeToquiz2 = () => {\n      this.setState({\n        level1: false,\n        level2: true,\n        level3: false,\n        level4: false,\n        level5: false\n      });\n      console.log(\"quiz2 clciked\");\n    };\n\n    this.changeToquiz3 = () => {\n      this.setState({\n        level1: false,\n        level2: false,\n        level3: true,\n        level4: false,\n        level5: false\n      });\n    };\n\n    this.changeToquiz4 = () => {\n      this.setState({\n        level1: false,\n        level2: false,\n        level3: false,\n        level4: true,\n        level5: false\n      });\n    };\n\n    this.changeToquiz5 = () => {\n      this.setState({\n        level1: false,\n        level2: false,\n        level3: false,\n        level4: false,\n        level5: true\n      });\n    };\n\n    this.authListener = () => {\n      //checks if user is already logged in 0n browser\n      fire.auth().onAuthStateChanged(user => {\n        if (user) {\n          this.setState({\n            user\n          });\n        } else {\n          this.setState({\n            user: null\n          });\n        }\n\n        return user;\n      });\n    };\n\n    this.retrieveData = () => {\n      fire.auth().onAuthStateChanged(user => {\n        if (user) {\n          var ref = fire.database().ref(\"data\").limitToLast(1); //takes the last data in DB\n\n          var userUID = fire.auth().currentUser.uid;\n          var query = ref.orderByChild(\"ID\").equalTo(userUID); //retrieves data about only the current logged in user\n\n          console.log(userUID);\n          query.once(\"value\", snapshot => {\n            let currentState = this.state.people;\n            const currentUser = snapshot.val();\n\n            for (let i in currentUser) {\n              currentState.push({\n                email: currentUser[i].UserEmail,\n                UserAnswer: currentUser[i].UserAnswer,\n                Questions: currentUser[i].Question,\n                id: currentUser[i].ID,\n                Score: currentUser[i].Score,\n                Level: currentUser[i].userLevel\n              });\n            } // currentState.push(user);\n\n\n            console.log(currentState);\n            this.setState({\n              people: currentState,\n              dataHasLoaded: true\n            });\n          });\n        } else {\n          console.log(\"no user\");\n        }\n      });\n    };\n\n    this.changetoQuiz = () => {\n      this.setState({\n        viewquiz: true\n      });\n    };\n\n    this.changetoProfile = () => {\n      this.setState({\n        viewProfile: !this.state.viewProfile\n      });\n    };\n\n    this.logout = e => {\n      e.preventDefault();\n      fire.auth().signOut();\n      console.log(\"Logged out\");\n    };\n\n    this.state = {\n      viewquiz: false,\n      people: [],\n      dataHasLoaded: false,\n      user: {},\n      disabled: true,\n      viewProfile: false // viewLogin:false\n\n    }; //  this.changeToquiz1 = this.changeToquiz1.bind(this);\n  }\n\n  componentDidMount() {\n    this.authListener();\n    this.retrieveData();\n    console.log(\"Data loaded\");\n  }\n\n  render() {\n    const x = this.props.stateQuiz1;\n    let renderData = this.state.people.map((person, index) => {\n      return React.createElement(\"div\", {\n        style: {\n          color: \" black\"\n        },\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, this.state.viewProfile ? React.createElement(UserProfile, {\n        className: \"userProfile\",\n        level: person.UserLevel,\n        score: person.Score,\n        question: person.Questions,\n        email: person.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }) : null);\n    });\n    let loadingSpinner = React.createElement(Loader, {\n      id: \"loader\",\n      type: \"ThreeDots\",\n      color: \"red \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      id: \"navbar\",\n      bg: \"primary\",\n      variant: \"dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      className: \"mr-auto\",\n      style: {\n        fontSize: 25\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Welcome\", React.createElement(ButtonToolbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.changeToquiz1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Rookie\"), React.createElement(Button, {\n      disabled: this.state.disabled,\n      onClick: this.changeToquiz2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Student\"), React.createElement(Button, {\n      disabled: this.state.disabled,\n      onClick: this.changeToquiz3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Intermediate\"), React.createElement(Button, {\n      disabled: this.state.disabled,\n      onClick: this.changeToquiz4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Expert\"), React.createElement(Button, {\n      disabled: this.state.disabled,\n      onClick: this.changeToquiz5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Master\"))), React.createElement(Button, {\n      onClick: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Logout \", React.createElement(FiLogOut, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }))), React.createElement(Button, {\n      onClick: this.changetoProfile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"Profile \", React.createElement(MdPerson, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }))))), React.createElement(Articles, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, this.state.dataHasLoaded ? renderData : loadingSpinner), React.createElement(Button, {\n      onClick: this.changetoQuiz,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, \"Take the Quiz\"), this.state.viewquiz ? React.createElement(Quiz, {\n      userLevel1: this.state.level1,\n      userLevel2: this.state.level2,\n      userLevel3: this.state.level3,\n      userLevel4: this.state.level4,\n      userLevel5: this.state.level5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }) : null);\n  }\n\n}\n\nexport default Welcome;","map":{"version":3,"sources":["/home/basil/farmsafety_app/src/components/home/welcome.js"],"names":["React","Component","MdPerson","MdCheckBox","FiLogOut","GiSwordsEmblem","piechart","Loader","Button","Nav","Navbar","ButtonToolbar","Tabs","Tab","TabPane","Quiz","fire","UserProfile","Test","Articles","Welcome","constructor","props","changeToquiz1","setState","level1","level2","level3","level4","level5","changeToquiz2","console","log","changeToquiz3","changeToquiz4","changeToquiz5","authListener","auth","onAuthStateChanged","user","retrieveData","ref","database","limitToLast","userUID","currentUser","uid","query","orderByChild","equalTo","once","snapshot","currentState","state","people","val","i","push","email","UserEmail","UserAnswer","Questions","Question","id","ID","Score","Level","userLevel","dataHasLoaded","changetoQuiz","viewquiz","changetoProfile","viewProfile","logout","e","preventDefault","signOut","disabled","componentDidMount","render","x","stateQuiz1","renderData","map","person","index","color","UserLevel","loadingSpinner","fontSize"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,eAAP;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,gBAArC;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,cAAT,QAA+B,gBAA/B;AACA,OAAOC,QAAP,MAAqB,mCAArB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SACEC,MADF,EAEEC,GAFF,EAGEC,MAHF,EAIEC,aAJF,EAKEC,IALF,EAMEC,GANF,EAOEC,OAPF,QAQO,iBARP,C,CASA;AACA;AACA;;AACA,OAAOC,IAAP,MAAiB,cAAjB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,WAAP,MAAwB,qBAAxB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,QAAP,MAAqB,YAArB;;AAEA,MAAMC,OAAN,SAAsBnB,SAAtB,CAAgC;AAC9BoB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAcnBC,aAdmB,GAcH,MAAM;AACpB,WAAKC,QAAL,CAAc;AACZC,QAAAA,MAAM,EAAE,IADI;AAEZC,QAAAA,MAAM,EAAE,KAFI;AAGZC,QAAAA,MAAM,EAAE,KAHI;AAIZC,QAAAA,MAAM,EAAE,KAJI;AAKZC,QAAAA,MAAM,EAAE;AALI,OAAd;AAOD,KAtBkB;;AAAA,SAwBnBC,aAxBmB,GAwBH,MAAM;AACpB,WAAKN,QAAL,CAAc;AACZC,QAAAA,MAAM,EAAE,KADI;AAEZC,QAAAA,MAAM,EAAE,IAFI;AAGZC,QAAAA,MAAM,EAAE,KAHI;AAIZC,QAAAA,MAAM,EAAE,KAJI;AAKZC,QAAAA,MAAM,EAAE;AALI,OAAd;AAOAE,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACD,KAjCkB;;AAAA,SAmCnBC,aAnCmB,GAmCH,MAAM;AACpB,WAAKT,QAAL,CAAc;AACZC,QAAAA,MAAM,EAAE,KADI;AAEZC,QAAAA,MAAM,EAAE,KAFI;AAGZC,QAAAA,MAAM,EAAE,IAHI;AAIZC,QAAAA,MAAM,EAAE,KAJI;AAKZC,QAAAA,MAAM,EAAE;AALI,OAAd;AAOD,KA3CkB;;AAAA,SA4CnBK,aA5CmB,GA4CH,MAAM;AACpB,WAAKV,QAAL,CAAc;AACZC,QAAAA,MAAM,EAAE,KADI;AAEZC,QAAAA,MAAM,EAAE,KAFI;AAGZC,QAAAA,MAAM,EAAE,KAHI;AAIZC,QAAAA,MAAM,EAAE,IAJI;AAKZC,QAAAA,MAAM,EAAE;AALI,OAAd;AAOD,KApDkB;;AAAA,SAqDnBM,aArDmB,GAqDH,MAAM;AACpB,WAAKX,QAAL,CAAc;AACZC,QAAAA,MAAM,EAAE,KADI;AAEZC,QAAAA,MAAM,EAAE,KAFI;AAGZC,QAAAA,MAAM,EAAE,KAHI;AAIZC,QAAAA,MAAM,EAAE,KAJI;AAKZC,QAAAA,MAAM,EAAE;AALI,OAAd;AAOD,KA7DkB;;AAAA,SAqEnBO,YArEmB,GAqEJ,MAAM;AACnB;AACApB,MAAAA,IAAI,CAACqB,IAAL,GAAYC,kBAAZ,CAA+BC,IAAI,IAAI;AACrC,YAAIA,IAAJ,EAAU;AACR,eAAKf,QAAL,CAAc;AACZe,YAAAA;AADY,WAAd;AAGD,SAJD,MAIO;AACL,eAAKf,QAAL,CAAc;AAAEe,YAAAA,IAAI,EAAE;AAAR,WAAd;AACD;;AACD,eAAOA,IAAP;AACD,OATD;AAUD,KAjFkB;;AAAA,SAkFnBC,YAlFmB,GAkFJ,MAAM;AACnBxB,MAAAA,IAAI,CAACqB,IAAL,GAAYC,kBAAZ,CAA+BC,IAAI,IAAI;AACrC,YAAIA,IAAJ,EAAU;AACR,cAAIE,GAAG,GAAGzB,IAAI,CACX0B,QADO,GAEPD,GAFO,CAEH,MAFG,EAGPE,WAHO,CAGK,CAHL,CAAV,CADQ,CAKR;;AAEA,cAAIC,OAAO,GAAG5B,IAAI,CAACqB,IAAL,GAAYQ,WAAZ,CAAwBC,GAAtC;AACA,cAAIC,KAAK,GAAGN,GAAG,CAACO,YAAJ,CAAiB,IAAjB,EAAuBC,OAAvB,CAA+BL,OAA/B,CAAZ,CARQ,CAQ6C;;AACrDb,UAAAA,OAAO,CAACC,GAAR,CAAYY,OAAZ;AACAG,UAAAA,KAAK,CAACG,IAAN,CAAW,OAAX,EAAoBC,QAAQ,IAAI;AAC9B,gBAAIC,YAAY,GAAG,KAAKC,KAAL,CAAWC,MAA9B;AAEA,kBAAMT,WAAW,GAAGM,QAAQ,CAACI,GAAT,EAApB;;AACA,iBAAK,IAAIC,CAAT,IAAcX,WAAd,EAA2B;AACzBO,cAAAA,YAAY,CAACK,IAAb,CAAkB;AAChBC,gBAAAA,KAAK,EAAEb,WAAW,CAACW,CAAD,CAAX,CAAeG,SADN;AAEhBC,gBAAAA,UAAU,EAAEf,WAAW,CAACW,CAAD,CAAX,CAAeI,UAFX;AAGhBC,gBAAAA,SAAS,EAAEhB,WAAW,CAACW,CAAD,CAAX,CAAeM,QAHV;AAIhBC,gBAAAA,EAAE,EAAElB,WAAW,CAACW,CAAD,CAAX,CAAeQ,EAJH;AAKhBC,gBAAAA,KAAK,EAAEpB,WAAW,CAACW,CAAD,CAAX,CAAeS,KALN;AAMhBC,gBAAAA,KAAK,EAAErB,WAAW,CAACW,CAAD,CAAX,CAAeW;AANN,eAAlB;AAQD,aAb6B,CAc9B;;;AACApC,YAAAA,OAAO,CAACC,GAAR,CAAYoB,YAAZ;AAEA,iBAAK5B,QAAL,CAAc;AACZ8B,cAAAA,MAAM,EAAEF,YADI;AAEZgB,cAAAA,aAAa,EAAE;AAFH,aAAd;AAID,WArBD;AAsBD,SAhCD,MAgCO;AACLrC,UAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACD;AACF,OApCD;AAqCD,KAxHkB;;AAAA,SA0HnBqC,YA1HmB,GA0HJ,MAAM;AACnB,WAAK7C,QAAL,CAAc;AACZ8C,QAAAA,QAAQ,EAAE;AADE,OAAd;AAGD,KA9HkB;;AAAA,SA+HnBC,eA/HmB,GA+HD,MAAM;AACtB,WAAK/C,QAAL,CAAc;AACZgD,QAAAA,WAAW,EAAE,CAAC,KAAKnB,KAAL,CAAWmB;AADb,OAAd;AAGD,KAnIkB;;AAAA,SAqInBC,MArImB,GAqIVC,CAAC,IAAI;AACZA,MAAAA,CAAC,CAACC,cAAF;AACA3D,MAAAA,IAAI,CAACqB,IAAL,GAAYuC,OAAZ;AACA7C,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACD,KAzIkB;;AAEjB,SAAKqB,KAAL,GAAa;AACXiB,MAAAA,QAAQ,EAAE,KADC;AAEXhB,MAAAA,MAAM,EAAE,EAFG;AAGXc,MAAAA,aAAa,EAAE,KAHJ;AAIX7B,MAAAA,IAAI,EAAE,EAJK;AAKXsC,MAAAA,QAAQ,EAAE,IALC;AAMXL,MAAAA,WAAW,EAAE,KANF,CAQX;;AARW,KAAb,CAFiB,CAYjB;AACD;;AAkDDM,EAAAA,iBAAiB,GAAG;AAClB,SAAK1C,YAAL;AACA,SAAKI,YAAL;AACAT,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACD;;AAwED+C,EAAAA,MAAM,GAAG;AACP,UAAMC,CAAC,GAAG,KAAK1D,KAAL,CAAW2D,UAArB;AAEA,QAAIC,UAAU,GAAG,KAAK7B,KAAL,CAAWC,MAAX,CAAkB6B,GAAlB,CAAsB,CAACC,MAAD,EAASC,KAAT,KAAmB;AACxD,aACE;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,KAAK,EAAE;AAAT,SAAZ;AAAiC,QAAA,GAAG,EAAED,KAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKhC,KAAL,CAAWmB,WAAX,GACC,oBAAC,WAAD;AACE,QAAA,SAAS,EAAC,aADZ;AAEE,QAAA,KAAK,EAAEY,MAAM,CAACG,SAFhB;AAGE,QAAA,KAAK,EAAEH,MAAM,CAACnB,KAHhB;AAIE,QAAA,QAAQ,EAAEmB,MAAM,CAACvB,SAJnB;AAKE,QAAA,KAAK,EAAEuB,MAAM,CAAC1B,KALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,GAQG,IATN,CADF;AAaD,KAdgB,CAAjB;AAgBA,QAAI8B,cAAc,GAAG,oBAAC,MAAD;AAAQ,MAAA,EAAE,EAAC,QAAX;AAAoB,MAAA,IAAI,EAAC,WAAzB;AAAqC,MAAA,KAAK,EAAC,MAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAArB;AAEA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAQ,MAAA,EAAE,EAAC,QAAX;AAAoB,MAAA,EAAE,EAAC,SAAvB;AAAiC,MAAA,OAAO,EAAC,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,SAAS,EAAC,SAAf;AAAyB,MAAA,KAAK,EAAE;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKlE,aAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAE,KAAK8B,KAAL,CAAWwB,QADvB;AAEE,MAAA,OAAO,EAAE,KAAK/C,aAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,EAQE,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAE,KAAKuB,KAAL,CAAWwB,QADvB;AAEE,MAAA,OAAO,EAAE,KAAK5C,aAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBARF,EAcE,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAE,KAAKoB,KAAL,CAAWwB,QADvB;AAEE,MAAA,OAAO,EAAE,KAAK3C,aAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAdF,EAoBE,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAE,KAAKmB,KAAL,CAAWwB,QADvB;AAEE,MAAA,OAAO,EAAE,KAAK1C,aAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBApBF,CAFF,CADF,EA+BE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKsC,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACS,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADT,CADF,CA/BF,EAoCE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKF,eAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACU,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADV,CADF,CApCF,CADF,CADF,EA6CE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7CF,EAuFG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAM,KAAKlB,KAAL,CAAWe,aAAX,GAA2Bc,UAA3B,GAAwCM,cAA9C,CAvFH,EAwFE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKnB,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAxFF,EA0FG,KAAKhB,KAAL,CAAWiB,QAAX,GACC,oBAAC,IAAD;AACE,MAAA,UAAU,EAAE,KAAKjB,KAAL,CAAW5B,MADzB;AAEE,MAAA,UAAU,EAAE,KAAK4B,KAAL,CAAW3B,MAFzB;AAGE,MAAA,UAAU,EAAE,KAAK2B,KAAL,CAAW1B,MAHzB;AAIE,MAAA,UAAU,EAAE,KAAK0B,KAAL,CAAWzB,MAJzB;AAKE,MAAA,UAAU,EAAE,KAAKyB,KAAL,CAAWxB,MALzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAQG,IAlGN,CADF;AAsGD;;AAvQ6B;;AAyQhC,eAAeT,OAAf","sourcesContent":["import React, { Component } from \"react\";\nimport \"./welcome.css\";\nimport { MdPerson, MdCheckBox } from \"react-icons/md\";\nimport { FiLogOut } from \"react-icons/fi\";\nimport { GiSwordsEmblem } from \"react-icons/gi\";\nimport piechart from \"../pictures/piechartMachinery.jpg\";\nimport Loader from \"react-loader-spinner\";\nimport {\n  Button,\n  Nav,\n  Navbar,\n  ButtonToolbar,\n  Tabs,\n  Tab,\n  TabPane\n} from \"react-bootstrap\";\n//import { BrowserRouter, Switch, Route, Link } from \"react-router-dom\";\n//import Login from \"../quiz/login\";\n//import Signup from \"../quiz/signup\";\nimport Quiz from \"../quiz/quiz\";\nimport fire from \"../../config/fire\";\nimport UserProfile from \"../quiz/userProfile\";\nimport Test from \"./test\";\nimport Articles from \"./articles\";\n\nclass Welcome extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      viewquiz: false,\n      people: [],\n      dataHasLoaded: false,\n      user: {},\n      disabled: true,\n      viewProfile: false\n\n      // viewLogin:false\n    };\n    //  this.changeToquiz1 = this.changeToquiz1.bind(this);\n  }\n  changeToquiz1 = () => {\n    this.setState({\n      level1: true,\n      level2: false,\n      level3: false,\n      level4: false,\n      level5: false\n    });\n  };\n\n  changeToquiz2 = () => {\n    this.setState({\n      level1: false,\n      level2: true,\n      level3: false,\n      level4: false,\n      level5: false\n    });\n    console.log(\"quiz2 clciked\");\n  };\n\n  changeToquiz3 = () => {\n    this.setState({\n      level1: false,\n      level2: false,\n      level3: true,\n      level4: false,\n      level5: false\n    });\n  };\n  changeToquiz4 = () => {\n    this.setState({\n      level1: false,\n      level2: false,\n      level3: false,\n      level4: true,\n      level5: false\n    });\n  };\n  changeToquiz5 = () => {\n    this.setState({\n      level1: false,\n      level2: false,\n      level3: false,\n      level4: false,\n      level5: true\n    });\n  };\n\n  componentDidMount() {\n    this.authListener();\n    this.retrieveData();\n    console.log(\"Data loaded\");\n  }\n\n  authListener = () => {\n    //checks if user is already logged in 0n browser\n    fire.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.setState({\n          user\n        });\n      } else {\n        this.setState({ user: null });\n      }\n      return user;\n    });\n  };\n  retrieveData = () => {\n    fire.auth().onAuthStateChanged(user => {\n      if (user) {\n        var ref = fire\n          .database()\n          .ref(\"data\")\n          .limitToLast(1);\n        //takes the last data in DB\n\n        var userUID = fire.auth().currentUser.uid;\n        var query = ref.orderByChild(\"ID\").equalTo(userUID); //retrieves data about only the current logged in user\n        console.log(userUID);\n        query.once(\"value\", snapshot => {\n          let currentState = this.state.people;\n\n          const currentUser = snapshot.val();\n          for (let i in currentUser) {\n            currentState.push({\n              email: currentUser[i].UserEmail,\n              UserAnswer: currentUser[i].UserAnswer,\n              Questions: currentUser[i].Question,\n              id: currentUser[i].ID,\n              Score: currentUser[i].Score,\n              Level: currentUser[i].userLevel\n            });\n          }\n          // currentState.push(user);\n          console.log(currentState);\n\n          this.setState({\n            people: currentState,\n            dataHasLoaded: true\n          });\n        });\n      } else {\n        console.log(\"no user\");\n      }\n    });\n  };\n\n  changetoQuiz = () => {\n    this.setState({\n      viewquiz: true\n    });\n  };\n  changetoProfile = () => {\n    this.setState({\n      viewProfile: !this.state.viewProfile\n    });\n  };\n\n  logout = e => {\n    e.preventDefault();\n    fire.auth().signOut();\n    console.log(\"Logged out\");\n  };\n\n  render() {\n    const x = this.props.stateQuiz1;\n\n    let renderData = this.state.people.map((person, index) => {\n      return (\n        <div style={{ color: \" black\" }} key={index}>\n          {this.state.viewProfile ? (\n            <UserProfile\n              className=\"userProfile\"\n              level={person.UserLevel}\n              score={person.Score}\n              question={person.Questions}\n              email={person.email}\n            />\n          ) : null}\n        </div>\n      );\n    });\n\n    let loadingSpinner = <Loader id=\"loader\" type=\"ThreeDots\" color=\"red \" />;\n\n    return (\n      <div>\n        <div>\n          <Navbar id=\"navbar\" bg=\"primary\" variant=\"dark\">\n            <Nav className=\"mr-auto\" style={{ fontSize: 25 }}>\n              Welcome\n              <ButtonToolbar>\n                <Button onClick={this.changeToquiz1}>Rookie</Button>\n                <Button\n                  disabled={this.state.disabled}\n                  onClick={this.changeToquiz2}\n                >\n                  Student\n                </Button>\n                <Button\n                  disabled={this.state.disabled}\n                  onClick={this.changeToquiz3}\n                >\n                  Intermediate\n                </Button>\n                <Button\n                  disabled={this.state.disabled}\n                  onClick={this.changeToquiz4}\n                >\n                  Expert\n                </Button>\n                <Button\n                  disabled={this.state.disabled}\n                  onClick={this.changeToquiz5}\n                >\n                  Master\n                </Button>\n              </ButtonToolbar>\n            </Nav>\n            <Button onClick={this.logout}>\n              <Nav>\n                Logout <FiLogOut />\n              </Nav>\n            </Button>\n            <Button onClick={this.changetoProfile}>\n              <Nav>\n                Profile <MdPerson />\n              </Nav>\n            </Button>\n          </Navbar>\n        </div>\n        <Articles />\n        {/*     <div style={{ backgroundColor: \"white\" }}>\n          <h3 className=\"heading\" style={{ color: \"black\" }}>\n            Guarding <GiSwordsEmblem />\n          </h3>\n          <p className=\"groove\">\n            Fixed guards must always be kept in place. These prevent\n            entanglement The guard should ensure that no part of your body can\n            reach the danger zone Fixed guarding of older machines should be\n            upgraded in line with the guarding on newer models Do not use a\n            machine unless all guards are in place\n          </p>\n\n          <h3 className=\"heading\" style={{ color: \"black\" }}>\n            Machinery Checks <MdCheckBox />\n            <p className=\"groove\">\n              All safety guards/ devices fitted The PTO \"O\" guards present\n              Hydraulic systems and hoses in good repair All machinery defects\n              identified and corrected Regular maintenance carried out\n            </p>\n          </h3>\n\n          <h3 className=\"heading\" style={{ color: \"black\" }}>\n            Machinery Checks <MdCheckBox />\n            <p className=\"groove\">\n              All safety guards/ devices fitted The PTO \"O\" guards present\n              Hydraulic systems and hoses in good repair All machinery defects\n              identified and corrected Regular maintenance carried out\n            </p>\n          </h3>\n          <h3 className=\"heading\" style={{ color: \"black\" }}>\n            Machinery Fatalities <MdCheckBox />\n            <p className=\"groove\">\n              Tractors and Machinery are the main cause of farm accidents in\n              Ireland. Elderly farmers and children are at particular risk.\n              Being entangled in PTO’s, crushed under a machine part, caught in\n              a machine mechanism, crushed between vehicles and struck by a\n              machine object are the main causes of deaths with farm machinery.\n              <img src={piechart} alt=\"\" />\n            </p>\n          </h3>*/}\n\n        {<div>{this.state.dataHasLoaded ? renderData : loadingSpinner}</div>}\n        <Button onClick={this.changetoQuiz}>Take the Quiz</Button>\n\n        {this.state.viewquiz ? (\n          <Quiz\n            userLevel1={this.state.level1}\n            userLevel2={this.state.level2}\n            userLevel3={this.state.level3}\n            userLevel4={this.state.level4}\n            userLevel5={this.state.level5}\n          />\n        ) : null}\n      </div>\n    );\n  }\n}\nexport default Welcome;\n"]},"metadata":{},"sourceType":"module"}